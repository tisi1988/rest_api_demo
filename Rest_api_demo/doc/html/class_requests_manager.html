<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Rest Demo App: RequestsManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Rest Demo App
   </div>
   <div id="projectbrief">Demo application for Rakuten.tv</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_requests_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">RequestsManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="class_requests_manager.html" title="The RequestsManager class implements the business logic of the application. It recieves the requests ...">RequestsManager</a> class implements the business logic of the application. It recieves the requests notified by the endpoints and uses the Database Controller to handle the persistent data.  
 <a href="class_requests_manager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="requestsmanager_8h_source.html">requestsmanager.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a42bfa64c769b2a2481938f1b606c8297"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_requests_manager.html#a42bfa64c769b2a2481938f1b606c8297">RequestsManager</a> (EndpointRegister *ep_register, EndpointDelete *ep_delete, EndpointUpdate *ep_update, EndpointView *ep_view, EndpointGetDecrypData *ep_get_decryp_data, <a class="el" href="class_d_b_controller.html">DBController</a> *db_controller)</td></tr>
<tr class="memdesc:a42bfa64c769b2a2481938f1b606c8297"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class contructor.  <a href="#a42bfa64c769b2a2481938f1b606c8297">More...</a><br /></td></tr>
<tr class="separator:a42bfa64c769b2a2481938f1b606c8297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa59ae6352fcfa39cbba1167195376fbd"><td class="memItemLeft" align="right" valign="top"><a id="aa59ae6352fcfa39cbba1167195376fbd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_requests_manager.html#aa59ae6352fcfa39cbba1167195376fbd">~RequestsManager</a> ()</td></tr>
<tr class="memdesc:aa59ae6352fcfa39cbba1167195376fbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class destructor. <br /></td></tr>
<tr class="separator:aa59ae6352fcfa39cbba1167195376fbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a200c2f9efca57d5c61db5e435b50311a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_requests_manager.html#a200c2f9efca57d5c61db5e435b50311a">onRegisterRequestEvent</a> (const quint64 &amp;requestId, const Content &amp;content)</td></tr>
<tr class="memdesc:a200c2f9efca57d5c61db5e435b50311a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the <a class="el" href="class_register_request_event.html" title="The RegisterRequestEvent class declares the message to notify a new Register request. ">RegisterRequestEvent</a> message. This method tells the Database Controller to write the data and then reponds the request through the proper endpoint.  <a href="#a200c2f9efca57d5c61db5e435b50311a">More...</a><br /></td></tr>
<tr class="separator:a200c2f9efca57d5c61db5e435b50311a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a207b05a24fa6aaf7cfcf0164f2771a3d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_requests_manager.html#a207b05a24fa6aaf7cfcf0164f2771a3d">onDeleteRequestEvent</a> (const quint64 &amp;requestId, const qint64 &amp;id)</td></tr>
<tr class="memdesc:a207b05a24fa6aaf7cfcf0164f2771a3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the <a class="el" href="class_delete_request_event.html" title="The DeleteRequestEvent class declares the message to notify a new Delete request. ...">DeleteRequestEvent</a> message. This method tells the Database Controller to remove the data and then reponds the request through the proper endpoint.  <a href="#a207b05a24fa6aaf7cfcf0164f2771a3d">More...</a><br /></td></tr>
<tr class="separator:a207b05a24fa6aaf7cfcf0164f2771a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dd9658cfc6a2e47b3972a83f46bc3b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_requests_manager.html#a3dd9658cfc6a2e47b3972a83f46bc3b1">onUpdateRequestEvent</a> (const quint64 &amp;requestId, const Content &amp;content)</td></tr>
<tr class="memdesc:a3dd9658cfc6a2e47b3972a83f46bc3b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the <a class="el" href="class_update_request_event.html" title="The UpdateRequestEvent class declares the message to notify a new Update request. ...">UpdateRequestEvent</a> message. This method tells the Database Controller to update the data and then reponds the request through the proper endpoint.  <a href="#a3dd9658cfc6a2e47b3972a83f46bc3b1">More...</a><br /></td></tr>
<tr class="separator:a3dd9658cfc6a2e47b3972a83f46bc3b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a466e231b08c67dfbc947340f2d7c478c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_requests_manager.html#a466e231b08c67dfbc947340f2d7c478c">onViewRequestEvent</a> (const quint64 &amp;requestId, const qint64 &amp;id)</td></tr>
<tr class="memdesc:a466e231b08c67dfbc947340f2d7c478c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the <a class="el" href="class_view_request_event.html" title="The ViewRequestEvent class declares the message to notify a new View request. ">ViewRequestEvent</a> message. This method tells the Database Controller to get the data and then reponds the request through the proper endpoint.  <a href="#a466e231b08c67dfbc947340f2d7c478c">More...</a><br /></td></tr>
<tr class="separator:a466e231b08c67dfbc947340f2d7c478c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61b2ad064581afba029013b3aa5b63b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_requests_manager.html#a61b2ad064581afba029013b3aa5b63b3">onGetDecryptDataRequestEvent</a> (const quint64 &amp;requestId, const qint64 &amp;deviceId, const qint64 &amp;contentId)</td></tr>
<tr class="memdesc:a61b2ad064581afba029013b3aa5b63b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the <a class="el" href="class_get_decrypt_data_request_event.html" title="The GetDecryptDataRequestEvent class declares the message to notify a new request to get some content...">GetDecryptDataRequestEvent</a> message. This method checks if the Content Protection System is the same as the Device protection system. If it is then decrypts the Content payload and responds the request with this data.  <a href="#a61b2ad064581afba029013b3aa5b63b3">More...</a><br /></td></tr>
<tr class="separator:a61b2ad064581afba029013b3aa5b63b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="class_requests_manager.html" title="The RequestsManager class implements the business logic of the application. It recieves the requests ...">RequestsManager</a> class implements the business logic of the application. It recieves the requests notified by the endpoints and uses the Database Controller to handle the persistent data. </p>

<p class="definition">Definition at line <a class="el" href="requestsmanager_8h_source.html#l00026">26</a> of file <a class="el" href="requestsmanager_8h_source.html">requestsmanager.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a42bfa64c769b2a2481938f1b606c8297"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42bfa64c769b2a2481938f1b606c8297">&#9670;&nbsp;</a></span>RequestsManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">RequestsManager::RequestsManager </td>
          <td>(</td>
          <td class="paramtype">EndpointRegister *&#160;</td>
          <td class="paramname"><em>ep_register</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EndpointDelete *&#160;</td>
          <td class="paramname"><em>ep_delete</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EndpointUpdate *&#160;</td>
          <td class="paramname"><em>ep_update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EndpointView *&#160;</td>
          <td class="paramname"><em>ep_view</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EndpointGetDecrypData *&#160;</td>
          <td class="paramname"><em>ep_get_decryp_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_d_b_controller.html">DBController</a> *&#160;</td>
          <td class="paramname"><em>db_controller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Class contructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ep_register</td><td>The endpoint for register requests to use. </td></tr>
    <tr><td class="paramname">ep_delete</td><td>The endpoint for delete requests to use. </td></tr>
    <tr><td class="paramname">ep_update</td><td>The endpoint for update requests to use. </td></tr>
    <tr><td class="paramname">ep_view</td><td>The endpoint for view requests to use. </td></tr>
    <tr><td class="paramname">ep_get_decryp_data</td><td>The endpoint for decrypted content requests to use. </td></tr>
    <tr><td class="paramname">db_controller</td><td>The Databse Controller to use. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="requestsmanager_8cpp_source.html#l00011">11</a> of file <a class="el" href="requestsmanager_8cpp_source.html">requestsmanager.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a207b05a24fa6aaf7cfcf0164f2771a3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a207b05a24fa6aaf7cfcf0164f2771a3d">&#9670;&nbsp;</a></span>onDeleteRequestEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RequestsManager::onDeleteRequestEvent </td>
          <td>(</td>
          <td class="paramtype">const quint64 &amp;&#160;</td>
          <td class="paramname"><em>requestId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const qint64 &amp;&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the <a class="el" href="class_delete_request_event.html" title="The DeleteRequestEvent class declares the message to notify a new Delete request. ...">DeleteRequestEvent</a> message. This method tells the Database Controller to remove the data and then reponds the request through the proper endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requestId</td><td>The request identifier to respond to. </td></tr>
    <tr><td class="paramname">id</td><td>The Content identifier to remove from the Database. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="requestsmanager_8cpp_source.html#l00076">76</a> of file <a class="el" href="requestsmanager_8cpp_source.html">requestsmanager.cpp</a>.</p>

</div>
</div>
<a id="a61b2ad064581afba029013b3aa5b63b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61b2ad064581afba029013b3aa5b63b3">&#9670;&nbsp;</a></span>onGetDecryptDataRequestEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RequestsManager::onGetDecryptDataRequestEvent </td>
          <td>(</td>
          <td class="paramtype">const quint64 &amp;&#160;</td>
          <td class="paramname"><em>requestId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const qint64 &amp;&#160;</td>
          <td class="paramname"><em>deviceId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const qint64 &amp;&#160;</td>
          <td class="paramname"><em>contentId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the <a class="el" href="class_get_decrypt_data_request_event.html" title="The GetDecryptDataRequestEvent class declares the message to notify a new request to get some content...">GetDecryptDataRequestEvent</a> message. This method checks if the Content Protection System is the same as the Device protection system. If it is then decrypts the Content payload and responds the request with this data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requestId</td><td>The request identifier to respond to. </td></tr>
    <tr><td class="paramname">deviceId</td><td>The device identifier the content msut be played to. </td></tr>
    <tr><td class="paramname">contentId</td><td>The Content identifier to decrypt. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="requestsmanager_8cpp_source.html#l00101">101</a> of file <a class="el" href="requestsmanager_8cpp_source.html">requestsmanager.cpp</a>.</p>

</div>
</div>
<a id="a200c2f9efca57d5c61db5e435b50311a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a200c2f9efca57d5c61db5e435b50311a">&#9670;&nbsp;</a></span>onRegisterRequestEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RequestsManager::onRegisterRequestEvent </td>
          <td>(</td>
          <td class="paramtype">const quint64 &amp;&#160;</td>
          <td class="paramname"><em>requestId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Content &amp;&#160;</td>
          <td class="paramname"><em>content</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the <a class="el" href="class_register_request_event.html" title="The RegisterRequestEvent class declares the message to notify a new Register request. ">RegisterRequestEvent</a> message. This method tells the Database Controller to write the data and then reponds the request through the proper endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requestId</td><td>The request identifier to respond to. </td></tr>
    <tr><td class="paramname">content</td><td>The Content to write on the Database. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="requestsmanager_8cpp_source.html#l00055">55</a> of file <a class="el" href="requestsmanager_8cpp_source.html">requestsmanager.cpp</a>.</p>

</div>
</div>
<a id="a3dd9658cfc6a2e47b3972a83f46bc3b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dd9658cfc6a2e47b3972a83f46bc3b1">&#9670;&nbsp;</a></span>onUpdateRequestEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RequestsManager::onUpdateRequestEvent </td>
          <td>(</td>
          <td class="paramtype">const quint64 &amp;&#160;</td>
          <td class="paramname"><em>requestId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Content &amp;&#160;</td>
          <td class="paramname"><em>content</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the <a class="el" href="class_update_request_event.html" title="The UpdateRequestEvent class declares the message to notify a new Update request. ...">UpdateRequestEvent</a> message. This method tells the Database Controller to update the data and then reponds the request through the proper endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requestId</td><td>The request identifier to respond to. </td></tr>
    <tr><td class="paramname">content</td><td>The new Content to write on the Database. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="requestsmanager_8cpp_source.html#l00084">84</a> of file <a class="el" href="requestsmanager_8cpp_source.html">requestsmanager.cpp</a>.</p>

</div>
</div>
<a id="a466e231b08c67dfbc947340f2d7c478c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a466e231b08c67dfbc947340f2d7c478c">&#9670;&nbsp;</a></span>onViewRequestEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RequestsManager::onViewRequestEvent </td>
          <td>(</td>
          <td class="paramtype">const quint64 &amp;&#160;</td>
          <td class="paramname"><em>requestId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const qint64 &amp;&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the <a class="el" href="class_view_request_event.html" title="The ViewRequestEvent class declares the message to notify a new View request. ">ViewRequestEvent</a> message. This method tells the Database Controller to get the data and then reponds the request through the proper endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requestId</td><td>The request identifier to respond to. </td></tr>
    <tr><td class="paramname">content</td><td>The Content to write on the Database </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="requestsmanager_8cpp_source.html#l00092">92</a> of file <a class="el" href="requestsmanager_8cpp_source.html">requestsmanager.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="requestsmanager_8h_source.html">requestsmanager.h</a></li>
<li><a class="el" href="requestsmanager_8cpp_source.html">requestsmanager.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
